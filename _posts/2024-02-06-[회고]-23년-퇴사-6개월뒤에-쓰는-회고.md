---
layout: post
date: 2024-02-06
title: "[회고] 23년 퇴사 6개월뒤에 쓰는 회고"
tags: [회고, ]
categories: [회고, ]
mermaid: true
---



### 1. 성공과 실패는 같이 오기도 한다.


![0](/assets/img/2024-02-06-회고-23년-퇴사-6개월뒤에-쓰는-회고.md/0.png)


첫 스타트업이 막을 내렸다. 돌이켜 보면 1년 반 조금 넘는 기간 동안에 많은 일이 있었다.


감사하게도 좋은 동료들을 만났다. 처음 개발팀은 모두가 오합지졸이었고 성장에 욕심이 있었다. 시키지도 않은 스터디를 했고 부끄럽지 않은 서비스를 만들고 싶어서 시키지도 않은 회의와 개선을 했다. 작은 스타트업 특성인지 모르겠지만 명확한 기획도 PM도 없었지만 함께 기획을 더 발전시키고 서로가 서로의 PM이 되어주었다.


덕분에 개발팀은 아주 타이트한 기간에도 서비스 하나를 온전하게 만들 수 있는 팀이 되었다. 서비스를 만들고 운영하고 개선하면서 보람과 성장을 얻은 회사였지만 한편으로는 개발자의 노력이 꼭 회사의 성과로 연결 되지는 않는다는 것을 몸으로 체득하게 해준 아쉬움이 많이 남는 커리어로 생각된다.


퇴사 후 휴식기에 서비스를 직접 만들며 느낀 내용을 자기소개에 녹이기도 했다.


![1](/assets/img/2024-02-06-회고-23년-퇴사-6개월뒤에-쓰는-회고.md/1.png)



### 2. 1년 7개월 커리어 타임 테이블 



#### 23년 3월 - 백엔드 온보딩은 없어요


개발팀은 구성이 조금 특이했다. 입사한 시점은 시리즈 A 투자를 받은 직후였고 나를 포함해 3명의 개발자를 채용했다. 팀장님을 제외하고 4명이 프론트 개발자가 되었다. 심지어 팀장님 조차도 프론트를 주로 개발하시다가 백엔드 담당자가 나가시면서 풀스택을 하고 있는 상황에 내가 채용된 것이다.(홍일점이 아닌 백일점)


물론 모르고 입사한 것은 아니다. 면접에서 어느 정도 회사의 상황을 알려주셨다. 들어오게 된다면 사수가 있는 상황은 아닌 팀장님과 내가 함께 백엔드를 이끌어 가야 한다는 내용은 인지하고 입사했다.


하지만 내 생각보다 상황은 더 아쉬웠다. 프론트의 경우 사수의 역할이 되어줄 분이 있었기 때문에 입사 동기들은 온보딩을 받을 수 있던 반면, 나는 스스로 찾아야 했기 때문이다.



#### 23년 4월 - 신입들은 박람회 한 번은 참여 하세요


![2](/assets/img/2024-02-06-회고-23년-퇴사-6개월뒤에-쓰는-회고.md/2.png)


입사 후 1달 쯤 되었을까, 대표님께서 4월에 열리는 넥스트라이즈 박람회에 개발자들도 참여하면 좋겠다는 말과 함께 추진되었다. 결과적으로 박람회의 참여는 큰 시너지를 주는 계기가 되었다.


우리는 다른 부서의 동료들과 함께 부스에서 서비스를 홍보하는 역할을 수행했다. TMI 지만 나는 서비스업에서 오래 종사했기 때문에 어렵지 않았고 지금도 굉장히 재밌는 경험으로 기억하고 있다.


**아쉽지만 좋았던 것만 있지는 않았다.** 이러한 박람회에서는 홍보를 위해 QR이나 판촉물을 제공하고, 테블릿등을 사용해 우리의 회사의 서비스를 홍보한다. 


**문제는 서비스에 버그가 많았고, 심지어 네트워크 문제로 로딩도 되지 않는 현상이 빈번하게 발생**했다. “개발팀”이라고 적혀있는 목에 걸린 명찰과 버그가 계속 발생하는 서비스를 보며 많이 민망했던 기억이 난다. 결국 홍보를 위해 화면을 셋팅하고, 버그가 안나는 정해진 동선으로만 시연을 하며 진행했다.


**민망만하고 끝나지 않았다.** 우리는 돌아가서 더 열정적으로 문제를 해결하기 위해 의기 투합을 하게 되었다.



#### 23년 4월 - SCM 그냥 재고 물류 관리 프로젝트 입니다.


회사는 브랜딩을 다시하는 과정으로 기획 리소스가 부족했고, 당분간 개발팀에게는 CS팀과 물류팀이 사용할 사내 프로젝트를 만들게 했다. 필요 기능은 정의되었지만 기획은 전혀 없었다. 그래서 였을까 얼마 사용하지 못하고 방치되는 프로젝트가 되었다. 나중에 알게된 사실인데 이렇게 될 것을 C레벨 분들은 알고 계셨다고 한다. 다만 새로 만들어진 개발팀이 합을 맞추고 테스트 해보기 적합하다고 판단해서 진행했다고 했다. 실패한 프로젝트지만 그 외적으로 많은 것을 얻었다.


**서비스 운용에 필요한 백그라운드 지식을 알게된다.**


회사의 메인 서비스는 가구 판매와 구독이 같이 공존하는 커머스 플렛폼이다. 때문에 뒷단의 플로우가 상당히 복잡했다. 특히 고가의 가구가 구독이 되는 과정에서 전자 계약과 채권 추심 계약등이 포함되며, 판매와 다르게 구독된 가구는 회사의 자산으로 계속 관리되는 품목이다. 그래서 가구의 위치 추적 히스토리 관리 등이 매우 중요했다.


**개발팀이 공통된 지식을 가지는데 계기가 된다.**


비즈니스 적인 관점을 제외하고도 개발적으로도 많은 도움이 되었다. 


특히 프론트와 API 서버의 분리가 왜 필요한지 인지하는데 큰 도움이 되었다. 기존에는 한명의 개발자가 클라이언트와 서버를 개발했다. 그래서 거대한 하나의 API가 뷰 페이지 하나를 위해 사용되는 경우가 많았다. 


이 때 나는 회의 때마다 강의 아닌 강의를 해야하는 재밌는 상황도 있었다. 

- REST API란?
- 서버와 클라이언트의 HTTP 통신의 의미
- 등등


#### 리브랜딩 시작


![3](/assets/img/2024-02-06-회고-23년-퇴사-6개월뒤에-쓰는-회고.md/3.png)


기획 회의도 참여하고 우여곡절 끝에 리브랜딩이 본격 시작된다.


개발팀은 리브랜딩에 맞춰 서비스 자체를 마이그레이션 하기로 한다. 

- 프론트는 JS와 `Angular` 기반에서 TS와 `React`로 기반을 변경한다.
- 백엔드는 JS와 `Express`, `MoongoDB` 기반에서 TS와 `Nestjs`, `Postgresql` 기반으로 변경한다.

레거시 서비스가 상당히 컷기 때문에 1차와 2차로 나누어 진행하기로 합의한다. 특히 백엔드의 경우 유저에게 보이는 서비스 뿐만 아니라 관리자 기능이나 내부 기능도 변경해야 했기 때문에 규모는 더 컸다.

- 1차 상품(구매/구독)에 대한 모든 서비스 변경
- 2차 인증과, 주문(구매/구독) 그리고 유저에 관한 모든 서비스 변경


#### 23년 7월 - 리브랜딩 1차 마이그레이션


먼저 마이그레이션에서 필요한 목표를 설정했다.

- 구매 구독 상품에 대한 명확한 경계를 만든다.
- 상품 조회 시점에 연산 로직을 최대한 제거하고, 등록 시점으로 연산 로직을 보낸다.

**구매 구독 상품에 대한 명확한 경계를 만든다.**


우리 서비스는 고가의 가구를 구독을 통해 제공하는 것을 주된 아이템으로 밀고 있었다. 하지만 의도와는 다르게 구독과 구매가 혼재했다. 그 때문에 CS 팀의 문의중 과반은 서비스에 대한 설명이었다.


그리고 리브랜딩을 통해 가구 구독을 전면으로 드러내기로 기획되었기 때문에 테이블과 API 설계 과정에서 구매와 구독에 대한 명확한 경계를 만드는 방향으로 진행했다.


**상품 조회 시점에 연산 로직을 최대한 제거하고, 등록 시점으로 연산 로직을 보낸다.**


레거시의 경우 상품 API에서 리스트 페이지에 필요한 모든 데이터를 제공했다. 게다가 상품 조회 시점에 서버측의 연산도 많았고, 프론트에서도 상품의 전체 데이터를 받아와 화면에 노출했기 때문에 더욱 느렸다. 실제 품목이 많은 페이지의 경우 측정해 보니 3초 이상이 걸리기도 했다. 


이러한 문제를 해결하기 위해 페이지 마다 API를 제공하는 것이 아닌 REST API를 통해 자원을 계층적으로 쪼게어 제공했으며, 페이지네이션과 필터 등도 적극 활용했다. 


또한 레거시 상세페이지는 옵션에 따른 가격 정보가 매번 서버에서 연산되어 내려왔다. 문제는 옵션을 변경할 때마다 연산이 수행되었기 때문에 서버에 큰 부하를 주고있었다. 이를 개선하기 위해 조회 시점이 아닌 등록 시점 연사된 가격 정보가 등록되도록 했다.


그리고 기존에는 유저 API와 어드민 API가 하나의 서버에서 동작했는데 여기서 많은 버그가 발생했다. 이를 개선하는 방향은 코드베이스를 모놀리식으로 변경해 별도의 서버로 돌아가게 만들었다.


결과적으로 상품 API는 크게 개선되었고, 1차 마이그레이션은 성공적으로 막을 내리는 것처럼 보였다…🥲


**오픈 직전 서버가 OOM으로 터지다.** 


![4](/assets/img/2024-02-06-회고-23년-퇴사-6개월뒤에-쓰는-회고.md/4.png)


1차 마이그레이션은 릴리즈는 리브랜딩 보도에 맞춰 진행되었다. 문제가 발생된 시점은 보도 자료가 나가고 오픈 1주일 전쯤 되었던 것으로 기억한다. MD분과 운영팀에서는 리브랜딩에 맞춰 상품을 새로 등록했다. 다른 한쪽에서는 운영 데이터를 사용해 QA가 진행되었다. 그리고 어느날.. **유저 API의 서버가 OOM 죽게된다.** 


처음에는 왜 OOM이 발생했는지 알 수 없었다 모니터링은 있었지만 OOM의 원인을 찾는데 확실한 단서를 주지는 못했다. 문제의 해결은 생각보다 간단했다. 여러 요구사항이 더 해지면서 한 번에 조회되는 데이터가 너무 많았던 것이다. LEFT JOIN을 끊어내는 것으로 해결 했다. 


처음 겪는 상황에 도움을 요청할 곳도 없었고, 오픈이 얼마 남지 않았다는 압박에 많이 힘들었던것으로 기억한다.



#### 23년 11월 - 리브랜딩 2차 마이그레이션


우여곡절 끝에 1차 마이그레이션이 끝났다.
(TMI: 다음 해에 참여한 박람회에서는 이전과 다르게, 원활하기 홍보를 할 수 있었다고 한다.)


그리고 이어서 2차 마이그레이션을 진행했다. 이번에도 목표를 설정했다.

- 주문에 대한 검증과 정합성 관리.
- 구독 라이프 사이클 정리와 명확한 정책 확보
- 암호화 해시 마이그레이션과 인증 강화

**주문에 대한 검증과 정합성 관리.**


기존 주문은 먼저 클라이언트에서 들어오는 값을 신뢰하고 사용하고 있었다 검증도 재대로 되고 있지 않았다. 또한 트랜잭션을 사용하지 않았기 때문에 로직 수행중 실패가 되는 경우 정합성이 깨지기 매우 쉬운 상태였다. 또한 환불이 되는 경우에 쿠폰이나 포인트가 복원 되지 않는 등 다양한 문제가 있었기 때문에 이러한 것을 보완하는데 집중했다. (하지만 동시성 문제의 경우는 당시에 잘 몰랐기 때문에 신경쓰지 못했다)


 


**구독 라이프 사이클 정리와 명확한 정책 확보**


![5](/assets/img/2024-02-06-회고-23년-퇴사-6개월뒤에-쓰는-회고.md/5.png)


구독의 경우 로직을 만들기 앞서 큰 문제가 있었다. 주문이 되어 구독된 상품이 다시 반납되는 과정이 매우 복잡했기 때문이다. 심지어 이것을 명확하게 파악하고 있는 분이 없었다. 이유는 구독이 하나 성사되기 위해 많은 이해관계자가 포함되었기 때문이다. 상황에 따라 정책이 조금씩 변경되는 경우가 발생해 지금의 상황이 되었다고 한다.


실제 회사를 다니며 겪은 일중, 불가항력적인 상황도 있었다. 캐피탈에서 내부 사정으로 한동안 채권 매입을 전면 중단한 일이 있었는데 이러한 영향으로 기존 정책이 수정되는 경우가 발생했다.


어쨌든 이러한 상황을 타파하고자. 담당자 한분 한분을 찾아가서 합의된 문서를 만들었으며, 이것을 소스코드에 녹이기 위해 고분분투했다.


**암호화 해시 마이그레이션과 인증 강화**


레거시에 있던 비밀번호 암호화 알고리즘을 변경하자고 적극 주장했다. 레거시는 양방향 해시 알고리즘을 사용중이였고 보안에도 취약한 것을 쓰고 있었기 때문이다. 논의 끝에 단방향 해시 알고리즘이 적용하기로 했다.


암호화 알고리즘 중에 몇 가지 후보군을 뽑았고 조건에 만족하는 라이브러리를 최종적으로 선정하고 적용했다. 하지만 기존 유저의 경우 해시된 비밀번호를 강제로 변경할 방법이 없었기 때문에 레거시 로직은 남아 있어야 했다.


해시 알고리즘 강화 외에도 인증 로직을 개선했다. 레거시의 경우 무제한 JWT 사용과 신규 서비스마다 유저를 새로 생성하는 문제가 있었다. 그래서 무제한 토큰 사용 방식을 Refresh Token을 사용하는 방식으로 개선했으며, 인증은 이후 신규 서비스를 고려해 여러 서비스에서 공통으로 사용할 수 있도록 설계했다.



#### 23년 2월 - 구독 정액제 도전을 위한 신규 서비스 런칭


![6](/assets/img/2024-02-06-회고-23년-퇴사-6개월뒤에-쓰는-회고.md/6.png)


신규 서비스 기획 시점은 리브랜딩 프로젝트 막바지에 갑자기 나오게 된다.


프로젝트를 해야하는 외적인 이유는 **이상적인 가구 구독 BM을 서비스로 실험해보자** 였다. 


하지만 이 프로젝트는 **어른들의 사정에 의해 어쩔 수 없이 진행**되었다 라고 보는게 맞았다.


이 시기 회사는 갈림길에 놓였다. 시장의 상황이 생각보다 더 나빠지며, 거기에 더해 레고랜드 사태의 여파로 채권 매입이 전면 중단되었고, 매입을 해준다 하더라도 구독 서비스의 가격 책정의 기준인 이자율이 올라서 구독 가격이 상승하는 상황이 계속되고 있었다. 


이러한 배경에서 투자사의 요청으로 프로젝트는 진행해야 했다. 대표님은 기획부터 런칭까지 딱 2개월의 시간을 주셨다. 신규 프로젝트의 성과를 보고 B2C를 계속할지 아니면 B2B를 주력으로 할지 결정하기로 합의했다.


개발팀이 구성된지 딱 1년된 상황이였고 우리는 그 동안 실력있는 팀이 되기 위해 많은 노력과 성장을 했다. 신규 프로젝트를 언제든 해낼 준비가 되어 있었다. 나는 프로젝트 기획에 적극 참여해 팀장님과 설계를 빠르게 해냈고, 누구보다 빠르게 개발을 했다. 


개발팀은 5명이 였고, 백엔드 나 혼자 담당해야 했다. B2C는 프론트에 3분이 붙었다. 팀장님은 전체적인 백업과 어드민 페이지를 맡아주셨다. 


우리는 1년간 직접 일정 산출을 하고 그 일정을 지키는 과정을 연습했다. 그럼에도 이 때는 어쩔 수 없이 야근을 해야 하는 상황이 많았다. 전체 일정이 밀리지 않게 API 공장장이 되어야 했고, 그 역할을 충실하게 수행했다.


이러한 모두의 노력 덕분에 달달구독은 내부 QA까지 큰 문제 없이 맞추고 성공적인 런칭을 했다.



#### 23년 4월 - 네이버페이 정기결제 도입 


![7](/assets/img/2024-02-06-회고-23년-퇴사-6개월뒤에-쓰는-회고.md/7.png)


신규 서비스인 달달구독을 개발하면서 추가적인 요구사항이 들어왔었다. 네이버페이 정기결제를 도입하자는 내용이었다. 하지만 일정에 차질이 생길 수 있었기 때문에 런칭 이후에 진행하기로 합의되었다.


네이버페이를 도입하는 이유는 명확했다. 기존에 사용중인 PG 서비스가 레거시 했기 때문이다. 신용카드를 직접 입력해서 결제 key를 받아서 결제하는 방식이었다. 실제 이 때문에 이탈자가 많이 발생했다. 게다가 환불을 API로 지원하지 않아서 CS팀에서 매번 직접 수행해야 했다.


이러한 배경에서 네이버페이 도입 소식은 많이 반가웠다. 하지만 이때는 몰랐다 연동 과정이 쉽지 않을 것이라는 것을 말이다.


 


**아주 관대한 결제 모듈과 엄격한 결제 모듈의 동거**


기존 결제 모듈은 관대하고 심플 했다. 백엔드에서 연동은 쉬웠고 정합성 검증을 따로 수행하지도 않았다.

- 발급된 결제키에 만료 기간도 없었고, 심지어 구독 시점에 금액과 달라도 결제는 수행되었다.
- API는 결제키를 통해 결제하는 API 딱 하나만 존재했다.

반면 네이버페이는 엄격했다. 연동 자체도 쉽지 않았으며 정합성 검증도 엄격했다.

- 클라이언트에서 진행되는 등록시점에 데이터와 결제 시점의 데이터가 달라지면 결제가 수행되지 않는다.
- 백엔드에서는 클라이언트에서 받아온 등록키를 사용해 “결제예약”을 먼저하고 발급되는 1회성 결제 번호를 통해 “결제완료”를 수행한다.
- 결제취소 실패 시 후속 처리(폴백로직)에 대한 엄격한 가이드
- 등등..

네이버페이의 경우 SDK를 제공하지 않기 때문에 SDK 부터 만들었다. 그리고 결제라는 행위를 추상화해 하나의 PG 모듈로 만들어 비즈니스 로직에서 사용하도록 만들었다.


**8번의 반려를 통해 배운 개발의 자세**


네이버페이 연동은 제공되는 체크리스트와 가이트를 모두 통과해야 최종 승인이 된다. 


이때 지속적으로 네이버페이 담당자와 연락을 하며, 반려된 내용에 대한 대응을 했다. 프론트 개선사항을 포함해 총 8번의 반려를 당했는데 다양한 엣지 케이스에 대한 검증과 검사, 데이터에 대한 설명, 운영 정책 까지 확인 하는 것을 보며 나는 그 동안 얼마나 허술하게 개발을 했는지 반성했다. 하지만 정말 많이 배웠다.



#### 23년 5월 - 각종 알림 중개 서비스를 만들자


![8](/assets/img/2024-02-06-회고-23년-퇴사-6개월뒤에-쓰는-회고.md/8.png)


알림 중개 서버는 운영하는 서비스가 2개 3개로 늘어나면서, 지속적으로 중복이 발생하는 알림성 로직들을 하나의 서버에서 중개하기 위해 진행한 프로젝트이다. 


알림 서버에서 REST API 응답을 지연시키지 않게 하기 위해 SQS를 내부적으로 사용하도록 설계했다. 하지만 비용상의 문제로 SQS를 하나만 사용해야 했기 때문에 뒷단의 로직이 깔끔하게 정리되지는 않았다.



#### 23년 7월 - 마지막 프로젝트 B2B 견적 서비스


프로젝트는 기존의 옵션 문제를 해결하기 위해 새로운 방식으로 풀어낸 것 외에는 어렵지 않은 프로젝트였다.


어려웠던 것은 백엔드 온보딩이었다. 당시 프론트 팀원 한 분이 풀스택으로 전환해야 하는 상황이 되었고 내가 그 분의 전향을 도와 멘토링을 진행했다. 그리고 프로젝트에서 관리자 API를 그 분이 구현해야 했다.



### 3. 남을 것인가 퇴장할 것인가?


1년반 설명한 것 외에도 더 많은 프로젝트가 진행되고 무산되었다. 나는 회사의 고용인으로도 개발팀의 팀원으로도 백엔드 개발자로도 언제나 최선을 다했다. 덕분에 회사 내부 평가와 동료 평가에서 역대 최고의 점수를 받았고 수습이 끝나고 6개월 뒤인 9개월 차에 연봉도 파격적으로 인상 받았다.  


하지만 회사는 지속적으로 상황이 나빠졌다. 결국 내게는 선택의 시간이 오게 되었다. 그 선택이 오지 않기를 바라며 회의도 많이 참여하고, 대표님께 독대도 요청하는 등의 노력도 많이 했다.


그럼에도 선택의 순간은 왔다. 나와 팀장님만 남을 것인가? 같이 나갈 것인가? 


결국 나는 나오는 선택을 했다. 그리고 대표님의 배려로 고용보험도 받을 수 있었다.


열정적이고 노력했던 첫 스타트업이 아쉽게 끝났다.

